<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-cn">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="æœ¬æ–‡æ¦‚è¦ï¼š1ï¼ŒDZNEmptyDataSetçš„åŸç†ä»‹ç»2ï¼Œä½ ç”¨çš„swizzleç”¨å¯¹äº†å—3ï¼Œå¦‚ä½•é¿å…associatedObjectæ—¶(ASSIGN)å‡ºç°é‡æŒ‡é’ˆ4ï¼Œå¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ å…¶ä¸­çš„ç»†èŠ‚ï¼š1ï¼Œ__NSCFString çš„å¯¹è±¡åœ¨heapä¸Šï¼Œä¸åœ¨stackä¸Š2ï¼Œé˜²æ­¢ä¸€ä¸ª æœ‰ç”¨çš„objectå¯¹è±¡ è¢«é”€æ¯">
<meta property="og:type" content="article">
<meta property="og:title" content="æ¢ç©¶DZNEmptyDataSetæºç &amp;ç»†èŠ‚&amp;æ‰©å±•">
<meta property="og:url" content="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/index.html">
<meta property="og:site_name" content="iKiwi">
<meta property="og:description" content="æœ¬æ–‡æ¦‚è¦ï¼š1ï¼ŒDZNEmptyDataSetçš„åŸç†ä»‹ç»2ï¼Œä½ ç”¨çš„swizzleç”¨å¯¹äº†å—3ï¼Œå¦‚ä½•é¿å…associatedObjectæ—¶(ASSIGN)å‡ºç°é‡æŒ‡é’ˆ4ï¼Œå¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ å…¶ä¸­çš„ç»†èŠ‚ï¼š1ï¼Œ__NSCFString çš„å¯¹è±¡åœ¨heapä¸Šï¼Œä¸åœ¨stackä¸Š2ï¼Œé˜²æ­¢ä¸€ä¸ª æœ‰ç”¨çš„objectå¯¹è±¡ è¢«é”€æ¯">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/20161128%E6%8E%A2%E7%A9%B6DZNEmptyDataSet%E6%BA%90%E7%A0%81-%E7%BB%86%E8%8A%82-%E6%89%A9%E5%B1%95/b.png">
<meta property="og:image" content="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/20161128%E6%8E%A2%E7%A9%B6DZNEmptyDataSet%E6%BA%90%E7%A0%81-%E7%BB%86%E8%8A%82-%E6%89%A9%E5%B1%95/a.png">
<meta property="og:updated_time" content="2019-06-22T03:32:12.380Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ¢ç©¶DZNEmptyDataSetæºç &amp;ç»†èŠ‚&amp;æ‰©å±•">
<meta name="twitter:description" content="æœ¬æ–‡æ¦‚è¦ï¼š1ï¼ŒDZNEmptyDataSetçš„åŸç†ä»‹ç»2ï¼Œä½ ç”¨çš„swizzleç”¨å¯¹äº†å—3ï¼Œå¦‚ä½•é¿å…associatedObjectæ—¶(ASSIGN)å‡ºç°é‡æŒ‡é’ˆ4ï¼Œå¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ å…¶ä¸­çš„ç»†èŠ‚ï¼š1ï¼Œ__NSCFString çš„å¯¹è±¡åœ¨heapä¸Šï¼Œä¸åœ¨stackä¸Š2ï¼Œé˜²æ­¢ä¸€ä¸ª æœ‰ç”¨çš„objectå¯¹è±¡ è¢«é”€æ¯">
<meta name="twitter:image" content="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/20161128%E6%8E%A2%E7%A9%B6DZNEmptyDataSet%E6%BA%90%E7%A0%81-%E7%BB%86%E8%8A%82-%E6%89%A9%E5%B1%95/b.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/">





  <title>æ¢ç©¶DZNEmptyDataSetæºç &ç»†èŠ‚&æ‰©å±• | iKiwi</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">iKiwi</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/28/20161128æ¢ç©¶DZNEmptyDataSetæºç -ç»†èŠ‚-æ‰©å±•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangdetong">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iKiwi">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">æ¢ç©¶DZNEmptyDataSetæºç &ç»†èŠ‚&æ‰©å±•</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-28T00:00:00+08:00">
                2016-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>æœ¬æ–‡æ¦‚è¦ï¼š<br>1ï¼ŒDZNEmptyDataSetçš„åŸç†ä»‹ç»<br>2ï¼Œä½ ç”¨çš„swizzleç”¨å¯¹äº†å—<br>3ï¼Œå¦‚ä½•é¿å…associatedObjectæ—¶(ASSIGN)å‡ºç°é‡æŒ‡é’ˆ<br>4ï¼Œå¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ</p>
<p>å…¶ä¸­çš„ç»†èŠ‚ï¼š<br>1ï¼Œ__NSCFString çš„å¯¹è±¡åœ¨heapä¸Šï¼Œä¸åœ¨stackä¸Š<br>2ï¼Œé˜²æ­¢ä¸€ä¸ª æœ‰ç”¨çš„objectå¯¹è±¡ è¢«é”€æ¯</p>
<a id="more"></a>

<h2 id="ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet"></a>ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet</h2><p>é‡åˆ°ä¸€ä¸ªbugï¼šemptyViewä¸ tableviewéƒ½å±•ç¤ºäº†<br><img src="20161128%E6%8E%A2%E7%A9%B6DZNEmptyDataSet%E6%BA%90%E7%A0%81-%E7%BB%86%E8%8A%82-%E6%89%A9%E5%B1%95/b.png" alt="logo"><br>1ï¼ŒæŸ¥çœ‹å±•ç¤ºemptyViewçš„é€»è¾‘ï¼Œæ˜¯å¦å±•ç¤ºemptyViewçš„ä½ç½®ï¼šç½‘ç»œè¯·æ±‚/DBæ•°æ®è¿”å›â€¦ æœ‰çš„æ—¶å€™åœ¨åŒä¸€ä¸ªclassä¸­å­˜åœ¨å¤šä¸ªç½‘ç»œè¯·æ±‚ï¼Œåœ¨æ¯ä¸ªç½‘ç»œè¯·æ±‚éƒ½åŠ ä¸Šäº†è¿™ç§é€»è¾‘ï¼Œä¸å…è®©æ–°æ¥çš„åŒäº‹çœ‹ç€å‘æ™•äº†ï¼Œè¿™æ‰æœ‰å¯èƒ½é€ æˆä¸Šé¢çš„view bug</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>Â (!<span class="keyword">self</span>.items.count)Â &#123;</span><br><span class="line">	[<span class="keyword">self</span> showEmptyContentWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"commonEmpty"</span>]Â tip:<span class="string">@"æš‚æ— æ•°æ®"</span>]; <span class="comment">// å®ç°é€»è¾‘ï¼šç»™å½“å‰vc.view addSubview emtpyView</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	[<span class="keyword">self</span> hideEmptyTips]; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ï¼Œå…¨å±€æœäº†ä¸€ä¸‹showEmptyContentWithImageï¼Œå‘ç°è¿™ç§æ–¹å¼ç‰¹åˆ«å¤šï¼</p>
<p>ã€éœ€æ±‚ã€‘æœŸæœ›åœ¨ä¸€ä¸ªVCä¸­æ·»åŠ ä¸€æ¬¡ emptyViewï¼Œåˆ°åº•æ˜¾ç¤ºä¸å¦ç”±å®ƒçš„datasourceæ¥ç¡®å®šï¼Œåœ¨reload<br>Data()è‡ªå·±åˆ¤æ–­ self.items.countï¼Œè€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±åœ¨ä¸Šå±‚åˆ¤æ–­ï¼ˆå› ä¸ºå±•ç¤ºemptyViewæ˜¯ä¸ªå›ºå®šçš„åˆ¤æ–­æ¨¡å¼ï¼Œä¸ä¾èµ–æˆ‘ä»¬ä¸Šå±‚çš„å…¶ä»–æ•°æ®ï¼ï¼ï¼ï¼‰</p>
<h2 id="DZNEmptyDataSetç®€ä»‹"><a href="#DZNEmptyDataSetç®€ä»‹" class="headerlink" title="DZNEmptyDataSetç®€ä»‹"></a>DZNEmptyDataSetç®€ä»‹</h2><p>DZNEmptyDataSetä¸“é—¨ä¸ºUITableViewã€UICollectionViewæä¾›ç©ºç™½é¡µé¢çš„ç¬¬ä¸‰æ–¹åº“ã€‚<br>ğŸ‘‡ç”¨UITableViewæ¥ä¸¾ä¾‹å­</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Protocol Conformance</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MainViewController</span> : <span class="title">UITableViewController</span> &lt;<span class="title">DZNEmptyDataSetSource</span>, <span class="title">DZNEmptyDataSetDelegate</span>&gt;</span></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="keyword">self</span>.tableView.emptyDataSetSource = <span class="keyword">self</span>;<span class="comment">// swizzleäº¤æ¢ reloadData()ä¸ dzn_reloadEmptyDataSet()</span></span><br><span class="line">    <span class="keyword">self</span>.tableView.emptyDataSetDelegate = <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æä¾› Data Source &amp; Delegate Implementation:æ§åˆ¶viewæ˜¾ç¤ºæ•°æ®ã€ç‚¹å‡»äº‹ä»¶...</span></span><br><span class="line">åœ¨åˆé€‚çš„æ—¶å€™ [<span class="keyword">self</span>.tableView reloadData];<span class="comment">// é€šè¿‡swizzleä¹Ÿå°±æ˜¯è°ƒç”¨dzn_reloadEmptyDataSet()</span></span><br></pre></td></tr></table></figure>

<p>ç®€å•ä»‹ç»ï¼š<br>é€šè¿‡associatedObjectç»™tableviewå…³è”çš„å±æ€§æœ‰ï¼š<br>ç©ºç™½é¡µï¼šemptyDataSetViewï¼ˆsubviewsçš„å¸ƒå±€ï¼‰<br>æ•°æ®æºï¼šemptyDataSetSourceï¼ˆæ˜¾ç¤ºçš„å†…å®¹ï¼‰<br>ä»£ç†ï¼šemptyDataSetDelegateï¼ˆæ‰‹åŠ¿ã€æ»šåŠ¨â€¦ï¼‰</p>
<p>é‡ç‚¹æ˜¯dzn_reloadEmptyDataSetçš„å®ç°ï¼š<br>é¦–å…ˆåˆ¤æ–­æ˜¯ééœ€è¦æ˜¾ç¤ºç©ºç™½é¡µ:if ([self dzn_itemsCount] == 0){â€¦}.<br>æ˜¾ç¤ºç©ºç™½é¡µï¼šæ ¹æ® emptyDataSetSource &amp; emptyDataSetDelegate æä¾›çš„å†…å®¹æ¥å¸ƒå±€ emptyDataSetViewç©ºç™½é¡µ</p>
<h3 id="emptyDataSetView"><a href="#emptyDataSetView" class="headerlink" title="emptyDataSetView"></a>emptyDataSetView</h3><p>é€šè¿‡associatedObjectç»™tableViewå…³è”ä¸€ä¸ªemptyDataSetView</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (DZNEmptyDataSetView *)emptyDataSetView&#123;</span><br><span class="line">    DZNEmptyDataSetView *view = objc_getAssociatedObject(<span class="keyword">self</span>, kEmptyDataSetView);</span><br><span class="line">    <span class="keyword">if</span> (!view)&#123;</span><br><span class="line">        view = [DZNEmptyDataSetView new];</span><br><span class="line">		 ...</span><br><span class="line">        [<span class="keyword">self</span> setEmptyDataSetView:view];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> view;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="emptyDataSetSource-amp-emptyDataSetDelegate"><a href="#emptyDataSetSource-amp-emptyDataSetDelegate" class="headerlink" title="emptyDataSetSource &amp; emptyDataSetDelegate"></a>emptyDataSetSource &amp; emptyDataSetDelegate</h3><p>é€šè¿‡ associatedObjectæ–¹å¼è®©tableViewå…³è”delegate&amp;dataSource(å…¶ä¸­ä½¿ç”¨äº†container è€Œä¸æ˜¯ç›´æ¥ å…³è”delegateï¼Œåé¢ä¼šä»‹ç»åŸå› )<br>swizzle æ–¹æ³•reloadData()ä¸dzn_reloadEmptyDataSet()</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setEmptyDataSetSource:(<span class="keyword">id</span>&lt;DZNEmptyDataSetSource&gt;)datasource&#123;</span><br><span class="line">	...</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, kEmptyDataSetSource, [[DZNWeakObjectContainer alloc] initWithWeakObject:datasource], OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">    [<span class="keyword">self</span> swizzleIfPossible:<span class="keyword">@selector</span>(reloadData)];</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)setEmptyDataSetDelegate:(<span class="keyword">id</span>&lt;DZNEmptyDataSetDelegate&gt;)delegate&#123;</span><br><span class="line">	...</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, kEmptyDataSetDelegate, [[DZNWeakObjectContainer alloc] initWithWeakObject:delegate], OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="swizzleIfPossible"><a href="#swizzleIfPossible" class="headerlink" title="swizzleIfPossible"></a>swizzleIfPossible</h3><p>swizzleçš„æ–¹å¼é€‰æ‹©äº†method_setImplementation å…¶ä¸­ ä½¿ç”¨äº†Cçš„æŒ‡é’ˆï¼ˆä¸ºä»€ä¹ˆä¸ç”¨method_exchangeImplementations åé¢æœ‰ä»‹ç»ï¼‰<br>_impLookupTableç”¨æ¥è®°å½•å·²ç»swizzleè¿‡çš„æ–¹æ³•ä¸Cçš„æŒ‡é’ˆ<br>å½“å†æ¬¡æ‰§è¡ŒswizzleIfPossibleçš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»swizzleè¿‡äº†ï¼Œä¿è¯åªswizzleä¸€æ¬¡ã€‚<br>Cçš„pointeræŒ‡å‘ original reloadDataæ–¹æ³•ï¼Œä¼šåœ¨dzn_original_implementationä¸­ä½¿ç”¨ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)swizzleIfPossible:(SEL)selector&#123;</span><br><span class="line">    ....</span><br><span class="line">    Method method = class_getInstanceMethod(baseClass, selector);</span><br><span class="line">    IMP dzn_newImplementation = method_setImplementation(method, (IMP)dzn_original_implementation);</span><br><span class="line">    <span class="built_in">NSDictionary</span> *swizzledInfo = @&#123;DZNSwizzleInfoOwnerKey: baseClass,</span><br><span class="line">                                   DZNSwizzleInfoSelectorKey: <span class="built_in">NSStringFromSelector</span>(selector),</span><br><span class="line">                                   DZNSwizzleInfoPointerKey: [<span class="built_in">NSValue</span> valueWithPointer:dzn_newImplementation]&#125;;</span><br><span class="line">    [_impLookupTable setObject:swizzledInfo forKey:key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dzn-original-implementation"><a href="#dzn-original-implementation" class="headerlink" title="dzn_original_implementation"></a>dzn_original_implementation</h3><p>å°†tableviewçš„reloadDataæ›¿æ¢çš„å®ç°éƒ½åšäº†ä»€ä¹ˆï¼Ÿ<br>ä»_impLookupTableä¸­å¾—åˆ°impPointer ï¼Œå…¶æŒ‡å‘originalçš„ reloadæ–¹æ³•<br>æ‰§è¡Œ[self dzn_reloadEmptyDataSet]æ¥å¸ƒå±€emptyDataSetViewï¼Œç„¶åæ‰§è¡Œ originalçš„ reloadæ–¹æ³•</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> dzn_original_implementation(<span class="keyword">id</span> <span class="keyword">self</span>, SEL _cmd)&#123;</span><br><span class="line">    <span class="comment">// Fetch original implementation from lookup table</span></span><br><span class="line">    Class baseClass = dzn_baseClassToSwizzleForTarget(<span class="keyword">self</span>);</span><br><span class="line">    <span class="built_in">NSString</span> *key = dzn_implementationKey(baseClass, _cmd);</span><br><span class="line">    <span class="built_in">NSDictionary</span> *swizzleInfo = [_impLookupTable objectForKey:key];</span><br><span class="line">    <span class="built_in">NSValue</span> *impValue = [swizzleInfo valueForKey:DZNSwizzleInfoPointerKey];</span><br><span class="line">    IMP impPointer = [impValue pointerValue];</span><br><span class="line">    <span class="comment">// We then inject the additional implementation for reloading the empty dataset</span></span><br><span class="line">    <span class="comment">// Doing it before calling the original implementation does update the 'isEmptyDataSetVisible' flag on time.</span></span><br><span class="line">    [<span class="keyword">self</span> dzn_reloadEmptyDataSet];</span><br><span class="line">    <span class="comment">// If found, call original implementation</span></span><br><span class="line">    <span class="keyword">if</span> (impPointer) &#123;</span><br><span class="line">        ((<span class="keyword">void</span>(*)(<span class="keyword">id</span>,SEL))impPointer)(<span class="keyword">self</span>,_cmd);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dzn-reloadEmptyDataSet"><a href="#dzn-reloadEmptyDataSet" class="headerlink" title="dzn_reloadEmptyDataSet"></a>dzn_reloadEmptyDataSet</h3><p>åˆ¤æ–­ å½“å‰çš„tableViewçš„cellæ•°é‡æ˜¯ä¸æ˜¯ä¸º0?ç„¶åè·å¾—emptyDataSetView<br>å¦‚æœdelegateå®ç°äº†è‡ªå®šä¹‰çš„ emptyViewï¼Œåˆ™æ˜¾ç¤ºemptyView(åœ¨projectä¸­ï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥ç»Ÿä¸€ç©ºç™½é¡µçš„æ˜¾ç¤ºé£æ ¼)<br>å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ˜¾ç¤ºé»˜è®¤æä¾›çš„emptyDataSetViewï¼Œæ ¹æ®delegate &amp; dataSourceæä¾›çš„æ•°æ®æ¥å¸ƒå±€emptyDataSetView</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dzn_reloadEmptyDataSet&#123;</span><br><span class="line">	...</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> dzn_itemsCount] == <span class="number">0</span>))&#123;</span><br><span class="line">        DZNEmptyDataSetView *view = <span class="keyword">self</span>.emptyDataSetView;</span><br><span class="line">        ...</span><br><span class="line">        ...</span><br><span class="line">        <span class="built_in">UIView</span> *customView = [<span class="keyword">self</span> dzn_customView];        </span><br><span class="line">        <span class="keyword">if</span> (customView) &#123;<span class="comment">// æ˜¾ç¤ºè‡ªå®šä¹‰emptyView</span></span><br><span class="line">            view.customView = customView;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">// æ˜¾ç¤ºé»˜è®¤æä¾›çš„emptyDataSetViewï¼Œæ ¹æ®delegate &amp; dataSourceæä¾›çš„æ•°æ®æ¥å¸ƒå±€emptyDataSetView</span></span><br><span class="line">        ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dzn-itemsCount"><a href="#dzn-itemsCount" class="headerlink" title="dzn_itemsCount"></a>dzn_itemsCount</h3><p>é€šè¿‡éå†çš„æ–¹å¼ç´¯è®¡æ¯ä¸ªsectionçš„rowçš„ä¸ªæ•°</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSInteger</span>)dzn_itemsCount&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// UITableView support</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> isKindOfClass:[<span class="built_in">UITableView</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="built_in">UITableView</span> *tableView = (<span class="built_in">UITableView</span> *)<span class="keyword">self</span>;</span><br><span class="line">        <span class="keyword">id</span> &lt;<span class="built_in">UITableViewDataSource</span>&gt; dataSource = tableView.dataSource;</span><br><span class="line">        <span class="built_in">NSInteger</span> sections = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (dataSource &amp;&amp; [dataSource respondsToSelector:<span class="keyword">@selector</span>(numberOfSectionsInTableView:)]) &#123;</span><br><span class="line">            sections = [dataSource numberOfSectionsInTableView:tableView];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dataSource &amp;&amp; [dataSource respondsToSelector:<span class="keyword">@selector</span>(tableView:numberOfRowsInSection:)]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">NSInteger</span> section = <span class="number">0</span>; section &lt; sections; section++) &#123;</span><br><span class="line">                items += [dataSource tableView:tableView numberOfRowsInSection:section];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// UICollectionView support</span></span><br><span class="line">	 ...</span><br><span class="line">    <span class="keyword">return</span> items;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ"><a href="#ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ" class="headerlink" title="ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ"></a>ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ</h2><p>æ›¾ç»ä¸€ç›´ä½¿ç”¨ method_exchangeImplementations æ¥è¿›è¡Œswizzleï¼Œåæ¥å‘ç°è¿™ç¯‡æ–‡ç« <a href="https://blog.newrelic.com/2014/04/16/right-way-to-swizzle/" target="_blank" rel="noopener">The Right Way to Swizzle in Objective-C</a>ï¼Œæ„Ÿè§‰ä»¥åè‡ªå·±è¦æ³¨æ„äº†<br>ç›¸ä¿¡èº«ä¸ºç¨‹åºå‘˜çš„ä½ ï¼Œçœ‹ä»£ç æ¯”çœ‹æ–‡å­—æè¿°æ›´èƒ½ç†è§£é—®é¢˜æ‰€åœ¨ã€‚</p>
<h3 id="What-is-the-incorrect-way-to-swizzleï¼š"><a href="#What-is-the-incorrect-way-to-swizzleï¼š" class="headerlink" title="What is the incorrect way to swizzleï¼š"></a>What is the incorrect way to swizzleï¼š</h3><blockquote>
<p>ğŸ‘‡method_exchangeImplementations</p>
</blockquote>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">IncorrectSwizzleClass</span> : <span class="title">NSObject</span></span></span><br><span class="line">- (<span class="keyword">void</span>) swizzleExample;</span><br><span class="line">- (<span class="keyword">void</span>) originalMethod;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">IncorrectSwizzleClass</span></span></span><br><span class="line">- (<span class="keyword">void</span>)swizzleExample&#123;</span><br><span class="line">    Method m1 = class_getInstanceMethod([<span class="keyword">self</span> <span class="keyword">class</span>], <span class="keyword">@selector</span>(originalMethod));</span><br><span class="line">    Method m2 = class_getInstanceMethod([<span class="keyword">self</span> <span class="keyword">class</span>], <span class="keyword">@selector</span>(replaceImp));</span><br><span class="line">    method_exchangeImplementations(m1, m2);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)originalMethod&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"originalMethod"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"string:%@"</span>,[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"*** -%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd)]);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)replaceImp&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"replaceImp"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"string:%@"</span>,[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"*** -%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd)]);</span><br><span class="line">    [<span class="keyword">self</span> replaceImp];<span class="comment">// æ‰§è¡Œorigin_Methodï¼Œé€šè¿‡è°ƒç”¨æ–¹æ³•æ¥å®ç°ï¼Œæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ @â€œreplace_impâ€</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h3 id="The-correct-way-to-swizzleï¼š"><a href="#The-correct-way-to-swizzleï¼š" class="headerlink" title="The correct way to swizzleï¼š"></a>The correct way to swizzleï¼š</h3><blockquote>
<p>ğŸ‘‡method_setImplementation &amp; CæŒ‡é’ˆ</p>
</blockquote>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CorrectSwizzleClass</span> : <span class="title">NSObject</span></span></span><br><span class="line">- (<span class="keyword">void</span>) swizzleExample;</span><br><span class="line">- (<span class="keyword">void</span>) originalMethod;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="keyword">static</span> IMP __original_Method_Imp;</span><br><span class="line"><span class="keyword">void</span> replaceImp(<span class="keyword">id</span> <span class="keyword">self</span>, SEL _cmd)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"replaceImp"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"string:%@"</span>,[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"*** -%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd)]);</span><br><span class="line">    ((<span class="keyword">int</span>(*)(<span class="keyword">id</span>,SEL))__original_Method_Imp)(<span class="keyword">self</span>, _cmd);<span class="comment">// æ‰§è¡Œorigin_Methodï¼Œé€šè¿‡æŒ‡é’ˆæ¥è°ƒç”¨æ–¹æ³•ï¼Œæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ _cmd</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CorrectSwizzleClass</span></span></span><br><span class="line">- (<span class="keyword">void</span>) swizzleExample&#123;</span><br><span class="line">    Method m = class_getInstanceMethod([<span class="keyword">self</span> <span class="keyword">class</span>],</span><br><span class="line">                                       <span class="keyword">@selector</span>(originalMethod));</span><br><span class="line">    __original_Method_Imp = method_setImplementation(m,</span><br><span class="line">                                                     (IMP)replaceImp);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>) originalMethod&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"originalMethod"</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"string:%@"</span>,[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"*** -%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd)]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>å…ˆæ‰“å°ç»“æœ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"####################  correct   #######################"</span>);</span><br><span class="line">CorrectSwizzleClass* example = [[CorrectSwizzleClass alloc] init];</span><br><span class="line">[example originalMethod];</span><br><span class="line">[example swizzleExample];</span><br><span class="line">[example originalMethod];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"####################  incorrect   #######################"</span>);</span><br><span class="line">IncorrectSwizzleClass* example2 = [[IncorrectSwizzleClass alloc] init];</span><br><span class="line">[example2 originalMethod];</span><br><span class="line">[example2 swizzleExample];</span><br><span class="line">[example2 originalMethod];</span><br></pre></td></tr></table></figure>

<p><img src="20161128%E6%8E%A2%E7%A9%B6DZNEmptyDataSet%E6%BA%90%E7%A0%81-%E7%BB%86%E8%8A%82-%E6%89%A9%E5%B1%95/a.png" alt="logo"></p>
<p>çœ‹ç»“æœå‘ç°ï¼š</p>
<ol>
<li><p><code>[self replaceImp];</code>ï¼šé€šè¿‡è°ƒç”¨OCçš„æ–¹æ³•æ—¶ï¼Œé»˜è®¤ä¼šä¼ é€’ä¸¤ä¸ªå‚æ•°<code>ï¼ˆself &amp; _cmdï¼‰</code>ï¼Œæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>@â€œreplace_impâ€</code>ï¼Œæ•…æ‰“å°çš„æ˜¯<code>replaceImp</code><br><code>[self replaceImp]</code> ä¼šè¢«ç¼–è¯‘å™¨å˜æˆ <code>objc_msgSend(self, @selector(replaceImp))</code></p>
</li>
<li><p><code>((int(*)(id,SEL))__original_Method_Imp)(self, _cmd)</code>;ï¼šé€šè¿‡æŒ‡é’ˆæ¥è°ƒç”¨æ–¹æ³•ï¼Œå»æ‰§è¡Œ<code>origin_Method</code>ï¼Œæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>_cmd</code>ï¼Œæ•…æ‰“å°çš„æ˜¯<code>originalMethod</code></p>
</li>
<li><p>é€šè¿‡ä»¥ä¸Šç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼šç”¨pointer å¯ä»¥æ­£ç¡®çš„ä¼ é€’<code>_cmd</code></p>
</li>
</ol>
<h2 id="associatedObjectæ³¨æ„-ASSIGN"><a href="#associatedObjectæ³¨æ„-ASSIGN" class="headerlink" title="associatedObjectæ³¨æ„(ASSIGN)"></a>associatedObjectæ³¨æ„(ASSIGN)</h2><h3 id="ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ"><a href="#ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ" class="headerlink" title="ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ"></a>ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ</h3><p>objc_setAssociatedObject(self, &amp;key, instance, OBJC_ASSOCIATION_ASSIGN)<br>å¦‚æœä½¿ç”¨OBJC_ASSOCIATION_ASSIGNæ—¶ï¼Œåº”è¯¥æ³¨æ„ instance æ˜¯å¦å·²ç»è¢«releaseäº†ï¼Œå¦‚æœè¢«releaseäº†ï¼Œå†ä½¿ç”¨objc_getAssociatedObject(self, &amp;key)å¾—åˆ°å…³è”çš„å¯¹è±¡æ—¶ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kEmptyDataSetSource = <span class="string">@"emptyDataSetSource"</span>;</span><br><span class="line">- (<span class="keyword">void</span>)set_common_weak_object &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *arr = @[<span class="string">@"123"</span>,<span class="string">@"456"</span>];</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, &amp;kEmptyDataSetSource, arr, OBJC_ASSOCIATION_ASSIGN);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)get_common_weak_object &#123;</span><br><span class="line">    <span class="keyword">id</span> result = objc_getAssociatedObject(<span class="keyword">self</span>,  &amp;kEmptyDataSetSource);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"result:%@"</span>,result);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    [<span class="keyword">self</span> set_common_weak_object];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span> get_common_weak_object];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœå‘ç° ä¼šcrashï¼Œå› ä¸ºå‡ºç°äº†é‡æŒ‡é’ˆ</p>
<h3 id="é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ"><a href="#é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ" class="headerlink" title="é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ"></a>é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ</h3><p>ç›´æ¥ä½¿ç”¨<code>OBJC_ASSOCIATION_RETAIN_NONATOMIC</code>å°±å¯ä»¥é˜²æ­¢å‡ºç°å•Šã€‚çš„ç¡®å¯ä»¥ï¼Œä¸è¿‡æœ‰ç‚¹æ—¶å€™ä½¿ç”¨<code>delegate</code>æ—¶ï¼Œéœ€è¦é˜²æ­¢å¾ªç¯å¼•ç”¨è€Œä½¿ç”¨<code>OBJC_ASSOCIATION_ASSIGN</code>ï¼Œæ•…è¿™é‡Œç›´æ¥ç”¨<code>OBJC_ASSOCIATION_RETAIN_NONATOMIC</code>æ¥ä»£æ›¿æ˜¯ä¸åˆé€‚çš„ã€‚<br>å¯ä»¥é—´æ¥çš„è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå³å¼•å…¥ä¸€ä¸ªç±»ï¼Œé€šè¿‡<code>objc_setAssociatedObject</code>å¯¹å…¶<code>instance</code>è¿›è¡Œ<code>retain</code>ï¼Œè€Œéœ€è¦å…³è”çš„<code>object</code>åœ¨<code>instance</code>ä¸­æ˜¯<code>weak</code>çš„ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DZNWeakObjectContainer</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">weak</span>) <span class="keyword">id</span> weakObject;</span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithWeakObject:(<span class="keyword">id</span>)object;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"DZNWeakObjectContainer.h"</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">DZNWeakObjectContainer</span></span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithWeakObject:(<span class="keyword">id</span>)object&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        _weakObject = object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<p>æ¥ä¸ªä¾‹å­ğŸ‘‡</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fixed delegate</span></span><br><span class="line">- (<span class="keyword">void</span>)set_common_weak_object_fixed &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *arr = @[<span class="string">@"123"</span>,<span class="string">@"456"</span>];</span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, &amp;kEmptyDataSetSource, [[DZNWeakObjectContainer alloc] initWithWeakObject:arr], OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)get_common_weak_object_fixed &#123;</span><br><span class="line">    DZNWeakObjectContainer *result = objc_getAssociatedObject(<span class="keyword">self</span>,  &amp;kEmptyDataSetSource);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"result:%@"</span>,result.weakObject);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    [<span class="keyword">self</span> set_common_weak_object_fixed];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span> get_common_weak_object_fixed];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ"><a href="#å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ"></a>å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)set_common_weak_string &#123;</span><br><span class="line"><span class="comment">//    NSString *name = @"hahaha"; // __NSCFConstanctString</span></span><br><span class="line"><span class="comment">//    NSString *name = [NSString stringWithFormat:@"hahaha"]; // NSTaggedPointerString</span></span><br><span class="line">    <span class="built_in">NSString</span> *name = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"adasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasdadasdasd"</span>]; <span class="comment">// __NSCFString </span></span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, &amp;kEmptyDataSetSource, name, OBJC_ASSOCIATION_ASSIGN);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)get_common_weak_string &#123;</span><br><span class="line">    <span class="keyword">id</span> result = objc_getAssociatedObject(<span class="keyword">self</span>,  &amp;kEmptyDataSetSource);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"result:%@"</span>,result);</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    [<span class="keyword">self</span> set_common_weak_string];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span> get_common_weak_string]; <span class="comment">// æ²¡æœ‰crashï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>ä¸Šé¢å·²ç» æ ‡æ³¨äº† <strong>NSCFConstanctString &amp; NSTaggedPointerString &amp; __NSCFString ï¼Œæœ¬ä»¥ä¸º</strong>NSCFString ä¸ __NSCFArrayæ˜¯çš„æƒ…å†µä¸€æ ·çš„ï¼Œéƒ½ä¼š åœ¨objc_getAssociatedObjectçš„æ—¶å€™å‡ºç°é‡æŒ‡é’ˆå¯¼è‡´crashï¼Œè€Œç»“æœå´æ²¡æœ‰ã€‚ä¸ºå•¥ï¼Ÿï¼Ÿï¼Ÿ</p>
</li>
<li><p><a href="http://stackoverflow.com/questions/4326965/objective-c-memory-allocation-on-stack-vs-heap" target="_blank" rel="noopener">æŸ¥èµ„æ–™stack-vs-heap</a>å‘ç°<code>__NSCFString</code> æ˜¯æ²¡æœ‰æ”¾åˆ°stackä¸Šçš„ï¼Œè€Œæ˜¯æ”¾åˆ°heapä¸Šäº†ï¼Œå…¶releaseæ˜¯æœ‰ç³»ç»Ÿæ§åˆ¶çš„ï¼Œå³æˆ‘ä»¬åœ¨getçš„æ—¶å€™å®ƒè¿˜åœ¨ï¼Œæ²¡æœ‰è¢«releaseã€‚</p>
</li>
</ol>
<h2 id="å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ"><a href="#å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ" class="headerlink" title="å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ"></a>å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ</h2><p>æœ‰ä¸€å¤©äº§å“ç»ç†è¯´ï¼Œå’±ä»¬çš„appä¸­çš„ç©ºç™½é¡µé¢é£æ ¼å¤ªä¹±äº†ï¼Œç©ºç™½é¡µæ˜¾ç¤ºçš„imageå¤§å°ä¸ä¸€ï¼Œæç¤ºæ–‡å­—çš„å¤§å°é¢œè‰²æœ‰çš„éƒ½ä¸ç›¸åŒï¼Œéœ€è¦å’±ä»¬ç»Ÿä¸€ä¸€ä¸‹emptyViewçš„é£æ ¼ã€‚<br>1ï¼Œä»¥åUIç»Ÿä¸€æä¾›24*24çš„image<br>2ï¼Œç¨‹åºå‘˜ç»Ÿä¸€æ•´ä¸ªappçš„ç©ºç™½é¡µçš„é£æ ¼</p>
<p>æ€è·¯ä»¥åŠç®€å•ä»£ç ï¼š</p>
<p>(1)EmptyView å³ç»Ÿä¸€çš„ç©ºç™½é¡µï¼ŒEmptyView éœ€è¦æš´éœ²å‡ºå…¬å…±çš„å±æ€§ï¼Œæ¯”å¦‚titleã€imageâ€¦ï¼Œè¿™æ ·æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥è®¾ç½®è‡ªå·±ç©ºç™½é¡µçš„imageã€titleâ€¦</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EmptyView:<span class="built_in">UIView</span></span><br><span class="line">_titleã€_imageã€_description</span><br><span class="line">...<span class="comment">// layout view</span></span><br></pre></td></tr></table></figure>

<p>(2)EmptyPage :æ§åˆ¶EmptyViewçš„æ˜¾ç¤ºtitleã€imageâ€¦è¿™ä¸ªæ§åˆ¶å™¨ä¸ä¸€å®šæ˜¯UIViewController,å¯ä»¥æ˜¯ä¸ªç®€å•NSObject. ï¼Œå®ƒä¼šretainè¿™ä¸ªEmptyViewçš„instance(æ¯”å¦‚emptyView)ã€‚EmptyPageéœ€è¦å®ç° çš„ä¸­çš„customViewForEmptyDataSetæ–¹æ³•ï¼Œå¹¶return self. emptyViewã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">EmptyPage() &lt;DZNEmptyDataSetDelegate, DZNEmptyDataSetSource&gt;</span><br><span class="line">- (<span class="built_in">UIView</span> *)customViewForEmptyDataSet:(<span class="built_in">UIScrollView</span> *)scrollView&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.emptyView;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)setImage:(<span class="built_in">UIImage</span> *)image&#123;</span><br><span class="line">	<span class="keyword">self</span>.emptyView.image = image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3)UIScrollView+Empty:å¯¹UIScrollViewè¿›è¡Œcategoryæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·æ•´ä¸ªappçš„æ‰€æœ‰tableView ä¸ collectionView éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è®¾ç½®ç©ºç™½é¡µ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIScrollView</span> + Empty</span><br><span class="line">- (<span class="keyword">void</span>)setupEmptyPageWithImage:(<span class="built_in">UIImage</span> *)image&#123;</span><br><span class="line">	EmptyPage *emptyPage = [EmptyPage new];</span><br><span class="line">	emptyPage.image = image;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// æŒ‡å®šself.delegate å¹¶swizzle selfçš„reload()</span></span><br><span class="line">	<span class="keyword">self</span>.emptyDataSetSource   = emptyPage;</span><br><span class="line">   <span class="keyword">self</span>.emptyDataSetDelegate = emptyPage;</span><br><span class="line">   <span class="comment">// âš ï¸ é¿å… emptyPage dealloc âš ï¸</span></span><br><span class="line">	objc_setAssociatedObject(<span class="keyword">self</span>, &amp;kEmptyPageAssociateObjectKey, emptyPage, OBJC_ASSOCIATION_RETAIN);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(4)ğŸŒ¿âš ï¸â¤ï¸ ç›¸å…³é—®é¢˜ ğŸ˜„ğŸ•›ğŸš</p>
<p>Qï¼šæ—¢ç„¶æ˜¯swizzle tableviewçš„reloadDataï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ˜¯å…¨å±€æ•ˆæœçš„ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ä¼šä¸ä¼šå¯¼è‡´æˆ‘ä¸æƒ³æ·»åŠ ç©ºç™½é¡µçš„ä½ç½®ä¹Ÿå±•ç¤ºäº†ç©ºç™½é¡µï¼Ÿ<br>Aï¼šä¸ä¼šçš„ï¼Œå¦‚æœä½ ä¸è®¾ç½®éœ€è¦å±•ç¤ºç©ºç™½é¡µï¼ˆ[self.tableView setupEmptyPage];ï¼‰ï¼Œé‚£ä¹ˆå½“å‰çš„self.tableView.emptyDataSource = nilï¼Œè€Œåœ¨DZNEmptyDataSetä¸­åšäº†åˆ¤æ–­ï¼ŒemptyDataSource=nilæ—¶ä¸å±•ç¤ºç©ºç™½é¡µï¼</p>
<p>Qï¼šä¸ºä»€ä¹ˆæœ‰çš„VCä¸­åˆšè¿›æ¥å…ˆå±•ç¤ºäº†ç©ºç™½é¡µï¼Œå†å±•ç¤ºæ•°æ®åˆ—è¡¨é¡µï¼Ÿ<br>Aï¼šåŸå› æ˜¯ï¼šåˆšè¿›æ¥è¿™ä¸ªVCæ—¶ï¼Œæ‰§è¡Œäº†[tableView reloadData]ã€‚çœ‹çœ‹æ˜¯ä¸æ˜¯è‡ªå·±ä¸»åŠ¨è°ƒç”¨äº†[tableView reloadData]ï¼Œå¦‚æœä¸æ˜¯ä¸»åŠ¨è°ƒç”¨çš„ï¼Œé‚£å°±æ˜¯ç³»ç»Ÿåœ¨å¸ƒå±€UIæ—¶è°ƒç”¨äº†ï¼Œæ¯”å¦‚ï¼š[tableView layoutSubviews] -&gt;[tableView reloadData]ï¼Œç”±äºç³»ç»Ÿè°ƒç”¨layoutSubviewsçš„æ—¶æœºæœ‰å¾ˆå¤šä¸­æƒ…å†µï¼Œå¦‚æœä½ ä¸æƒ³ä¸€ä¸€æ’æŸ¥ï¼Œä½ å¯ä»¥å»¶åè®¾ç½®ç©ºç™½çš„ä½ç½®ã€ä¸æ”¾åœ¨viewDidLoadä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨ç½‘ç»œè¯·æ±‚ç»“æŸåã€‘</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/05/20161005ä»£ç ä¼˜åŒ–ä¹‹å®å®šä¹‰-macros/" rel="next" title="ä»£ç ä¼˜åŒ–ä¹‹å®å®šä¹‰ - macros">
                <i class="fa fa-chevron-left"></i> ä»£ç ä¼˜åŒ–ä¹‹å®å®šä¹‰ - macros
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/01/07/20170107é¢„é˜²-app-crash-ä¹‹-å­çº¿ç¨‹åˆ·æ–°UI/" rel="prev" title="é¢„é˜² app crash ä¹‹ å­çº¿ç¨‹åˆ·æ–°UI">
                é¢„é˜² app crash ä¹‹ å­çº¿ç¨‹åˆ·æ–°UI <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8yOTMzNy81OTA1"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wangdetong</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet"><span class="nav-number">1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥DZNEmptyDataSet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DZNEmptyDataSetç®€ä»‹"><span class="nav-number">2.</span> <span class="nav-text">DZNEmptyDataSetç®€ä»‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#emptyDataSetView"><span class="nav-number">2.1.</span> <span class="nav-text">emptyDataSetView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#emptyDataSetSource-amp-emptyDataSetDelegate"><span class="nav-number">2.2.</span> <span class="nav-text">emptyDataSetSource &amp; emptyDataSetDelegate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#swizzleIfPossible"><span class="nav-number">2.3.</span> <span class="nav-text">swizzleIfPossible</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dzn-original-implementation"><span class="nav-number">2.4.</span> <span class="nav-text">dzn_original_implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dzn-reloadEmptyDataSet"><span class="nav-number">2.5.</span> <span class="nav-text">dzn_reloadEmptyDataSet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dzn-itemsCount"><span class="nav-number">2.6.</span> <span class="nav-text">dzn_itemsCount</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ"><span class="nav-number">3.</span> <span class="nav-text">ä½ çš„swizzleæ–¹å¼ç”¨å¯¹äº†å—ï¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-the-incorrect-way-to-swizzleï¼š"><span class="nav-number">3.1.</span> <span class="nav-text">What is the incorrect way to swizzleï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-correct-way-to-swizzleï¼š"><span class="nav-number">3.2.</span> <span class="nav-text">The correct way to swizzleï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆ†æ"><span class="nav-number">3.3.</span> <span class="nav-text">åˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#associatedObjectæ³¨æ„-ASSIGN"><span class="nav-number">4.</span> <span class="nav-text">associatedObjectæ³¨æ„(ASSIGN)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ"><span class="nav-number">4.1.</span> <span class="nav-text">ä¸å°å¿ƒå¯èƒ½å‡ºç°é‡æŒ‡é’ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ"><span class="nav-number">4.2.</span> <span class="nav-text">é˜²æ­¢å‡ºç°é‡æŒ‡é’ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ"><span class="nav-number">5.</span> <span class="nav-text">å…¶å®åˆ°è¿™å·²ç»è¯´å®Œäº†ï¼Œä¸è¿‡åœ¨æµ‹è¯•æ—¶å‘ç°stringçš„é—®é¢˜ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ"><span class="nav-number">6.</span> <span class="nav-text">å¯¹DZNEmptyDataSetè¿›è¡Œæ‰©å±•ï¼Œç»Ÿä¸€appçš„ç©ºç™½é¡µ</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangdetong</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  





  

  

  

  
  

  

  

  

</body>
</html>
